<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Native Dialogs Example</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.2/purify.min.js"></script>
	<script type="module" src="./customdialog.js"></script>
  </head>
  <body>
    <header>
      <h1>Native Dialogs Example</h1>
    </header>
    <main>
      <button id="alertBtn">Alert</button>
      <button id="confirmBtn">Confirm</button>
      <button id="promptBtn">Prompt</button>
      <button id="saferPromptBtn">Safer Prompt</button>
      <br><br>
      <output id="confirmOutput"></output>
    </main>
    <script>
      const alertBtn = document.getElementById("alertBtn");
      const confirmBtn = document.getElementById("confirmBtn");
      const promptBtn = document.getElementById("promptBtn");
      const saferPromptBtn = document.getElementById("saferPromptBtn");
      const confirmOutput = document.getElementById("confirmOutput");

      alertBtn.addEventListener("click", () => {
        window.alert("This is an alert message");
      });

      confirmBtn.addEventListener("click", () => {
        const result = window.confirm("Do you want to proceed?");
        confirmOutput.textContent = `The value returned by the confirm method is: ${result}`;
      });

      promptBtn.addEventListener("click", () => {
        const result = window.prompt("What's your name?");
        if (result === null) {
          console.log("User cancelled the prompt");
        } else if (result === "") {
          console.log("User didn't enter anything");
        } else {
          console.log(`Hello, ${result}!`);
        }
      });

      saferPromptBtn.addEventListener("click", () => {
        const message = DOMPurify.sanitize(`Please enter your name:<br><input type="text" id="promptInput">`);
        window.alert(message);
        setTimeout(() => {
          const promptInput = document.getElementById("promptInput");
          if (promptInput) {
            const sanitizedResult = DOMPurify.sanitize(promptInput.value);
            if (sanitizedResult === "") {
              console.log("User didn't enter anything");
            } else {
              console.log(`Hello, ${sanitizedResult}!`);
            }
          } else {
            console.log("Prompt input not found");
          }
        }, 0);
      });
    </script>
  </body>
</html>
