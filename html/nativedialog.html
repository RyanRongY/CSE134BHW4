<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Native Dialogs Example</title>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@2.3.1/dist/purify.min.js"></script>
  </head>
  <body>
    <h1>Native Dialogs Example</h1>
    <button id="alertBtn">Alert</button>
    <button id="confirmBtn">Confirm</button>
    <button id="promptBtn">Prompt</button>
    <button id="saferPromptBtn">Safer Prompt</button>
    <br><br>
    <label for="output">Output:</label>
    <output id="output"></output>
    <script>
      const alertBtn = document.getElementById('alertBtn');
      alertBtn.addEventListener('click', () => {
        window.alert('This is a built-in alert dialog');
      });

      const confirmBtn = document.getElementById('confirmBtn');
      confirmBtn.addEventListener('click', () => {
        const result = window.confirm('This is a built-in confirm dialog');
        document.getElementById('output').textContent = `The value returned by the confirm method is: ${result}`;
      });

      const promptBtn = document.getElementById('promptBtn');
      promptBtn.addEventListener('click', () => {
        const userInput = window.prompt('Please enter something:');
        const sanitizedInput = DOMPurify.sanitize(userInput);
        const output = document.getElementById('output');
        if (sanitizedInput === null) {
          output.textContent = 'User canceled the prompt';
        } else if (sanitizedInput === '') {
          output.textContent = 'User didn\'t enter anything';
        } else {
          output.textContent = `User entered: ${sanitizedInput}`;
        }
      });

      const saferPromptBtn = document.getElementById('saferPromptBtn');
      saferPromptBtn.addEventListener('click', () => {
        const userInput = window.prompt(html`Please enter something:`);
        const sanitizedInput = DOMPurify.sanitize(userInput);
        const output = document.getElementById('output');
        if (sanitizedInput === null) {
          output.textContent = 'User canceled the prompt';
        } else if (sanitizedInput === '') {
          output.textContent = 'User didn\'t enter anything';
        } else {
          output.textContent = `User entered: ${sanitizedInput}`;
        }
      });

      // tagged template string to sanitize user input with DOMPurify
      function html(strings, ...values) {
        const dirty = strings.reduce((prev, next, i) => `${prev}${next}${values[i] || ''}`, '');
        return DOMPurify.sanitize(dirty);
      }
    </script>
  </body>
</html>
